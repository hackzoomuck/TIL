[**Identity and Access Management (IAM)**]

AWS 사용자는 user들( AWS 계정과 AWS 안의 이용가능한 APIs/Servies )의 접근과 권한을 관리한다. 계정관리를 해준다.



[**S3 Lifecycle Policy**]

데이터는 보통 제한된 시간 내에 useful하다. 그 기간에 데이터의 접근도 빈번하다. 사용을 안할때의 데이터는 아카이브 할 수 있고 아카이브 스토리지는 일반적으로 더 비용이 효율적이다.

AWS는 Glacier(긴 기간 아카이브 스토리지 서비스, 다른 스토리)



[**S3**]

- 버킷 속성에서 정적 웹 사이트 호스팅을 할 수 있음. 서버 기술이 필요 없는 정적 웹 사이트를 호스트 가능(Route 53이용가능)



[**Route 53**]

AWS에서 제공하는 DNS 서비스이다. 내가 사용하고자하는 도메인 검색해 가용한지 보고 사야한다. 

* 특이점 : AWS 내부 서비스로 연결해준다.

DNS : 도메인에 해당하는 IP 주소를 반환해주는 것. 



[**명령어 nslookup**]

명령어로 도메인을 볼 수 있다.

nslookup www.naver.com
서버:    dns.google
Address:  8.8.8.8

권한 없는 응답:
이름:    e6030.a.akamaiedge.net
Address:  23.46.23.18
Aliases:  www.naver.com
          www.naver.com.nheos.com
          www.naver.com.edgekey.net



**[VPC] : Virtual Private Cloud**

AWS에서 제공해주는 네트워크 계층을 서비스해주는 것. 

VPC별로 격리가 된다. 서로 구분이 되어서 통신 네트워크가 묶이게 된다. 

네트워킹이 가능하도록 해주는 서비스이다. 

- 네트워크 계층

- EC2 인스턴스를 비롯한 여러 AWS 서비스의 리소스를 담을 수 있는 가상 네트워크 

- **한 AWS 리전** 안에서만 존재할 수 있고, 한 리전에 만든 VPC는 **다른 리전에서는 보이지 않음**

- VPC 안에 서브넷 존재

- 연속적인 IP 주소 범위로 구성 ⇒ CIDR 블록으로 표시

  10.0.0.0/8 	 ⇒ 10.0.0.0 ~ 10.255.255.255

  172.16.0.0/12 ⇒ 172.16.0.0 ~ 172.31.255.255

  192.168.0.0/16 ⇒ 192.168.0.0 ~ 192.168.255.255

  

**[서브넷(subnet)]**

- VPC 내 논리 컨테이너

- 논리적인 그룹핑

- EC2 인스턴스를 배치하는 장소  = 인스턴스는 서브넷 안에 위치

  - 한번 서브넷에 인스턴스를 생성하면 다른 서브넷으로 옮길 수 없음
  - 인스턴스를 종료하고 다른 서브넷에 새 인스턴스를 만들 수는 있음

- 인스턴스를 서로 **격리**하고, 인스턴스 간의 트랙픽 흐름을 **제어**하고, 인스턴스를 기능별로 묶을 수 있음

- 서브넷 CIDR 블록

  - VPC의 일부, VPC 내에서는 유니크해야 함

  - 모든 서브넷에서 처음 4개의 IP와 마지막 1개는 예약되어 있으므로 인스턴스에 할당할 수 없음
    예: 서브넷 CIDR이 172.16.100.0/24인 경우 		
    172.16.100.0 ~ 172.16.100.3, 172.16.100.255

- 서브넷은 하나의 **가용 영역**(Availability Zone, AZ) 내에서만 존재할 수 있음

  

**[ENI(Elastic Network Interface: 탄력적 네트워크 인터페이스)]**

- **네트워크 카드**

- 하나의 서브넷에 연결되어 있음

- 물리 서버의 네트워크 인터페이스와 같은 기능을 수행

  

**[igw : 인터넷 게이트웨이]**

- 퍼블릭 IP 주소(**외부**에서 나를 식별할 수 있도록 해주는 주소)를 할당받은 인스턴스가 인터넷과 연결돼서 요청을 수신할 수 있도록 기능을 제공
- 처음 VPC를 만들면 인터넷 게이트웨이가 연결되어 있지 않으므로, 직접 인터넷 게이트웨이를 만들고 VPC와 연결해야 함
- **하나의 VPC**는 **하나의 인터넷 게이트웨이**만 연결할 수 있음

=>퍼블릭 ip주소, 인터넷 게이트웨이가 있어야 외부에서 접근 가능



**[라우팅]**

- VPC는 소프트웨어 함수로 IP 라우팅을 구현 => 사용자는 라우팅 테이블만 관리

- **라우팅 테이블**은 하나 이상의 라우팅과 하나 이상의 서브넷으로 연결로 구성, (경로를 명시해 놓은 것이 라우팅 테이블)

- 기본 라우팅 : 인터넷 게이트웨이를 가리키는 라우팅
  **대상주소(목적지 주소)** 		                                                **대상**
  **0.0.0.0/0** (어디로 가든지)  			                              igw-xxxxxxxxx           
  인터넷 상의 모든 호스트 IP를 기반             인터넷 게이트웨이(외부로 연결해주는 통로)

- 기본 라우팅이 포함된 라우팅 테이블과 연결된 서브넷 ⇒ 퍼블릿 서브넷 

- 기본 라우팅이 포함된 라우팅 테이블과 연결되지 않은 서브넷 ⇒ 프라이빗 서브넷

  대상 주소				        대상
  172.31.0.0/16				LOCAL(동일 VPC 안)
  0.0.0.0/0				          igw-xxxxxxxx
  198.51.100.50으로 패킷을 보낼려고 하면, … 라우팅할 위치와 가장 근접하게 일치하는 항목을 기반으로 라우팅을 처리하므로, 인터넷 게이트웨이로 라우팅됨

  => 라우팅 테이블의 항목들간의 **순서는 중요하지 않음**
  
- 대상 주소에 가장 근사한 대상으로 간다



**[보안 그룹]**

- 방화벽과 같은 기능을 제공

- 인스턴스의 ENI에서 송수신하는 트래픽을 허가해서 트래픽을 제어(특정 IP 들어오기/나가기, 특정 포트로 들어오기/나가기 제어)

- 모든 ENI는 최소 한개 이상의 보안 그룹과 연결되야 함, 보안 그룹은 여러 ENI와 연결될 수 있음(N:N관계)

- 생성할 때 보안 그룹 이름, 설명, 포함될 VPC를 지정하고, 생성 후에 인바운드, 아웃바운드 규칙을 지정 ⇒ 트래픽을 허용

- 화이트리스트 방식(블랙리스트 방식:허가하지 않은 것은 못 들어옴, 화이트리스트 방식:허가하는 것만 들어올 수 있게 함)

- 내 서버로 들어오는 것은 인바운드, 밖으로 나가는 건 아웃바운드

- **상태 저장 방화벽** 역할 ⇒ 보안 그룹이 트래픽을 한 방향으로 전달되도록 허용할 때 반대 방향의 응답 트래픽을 지능적으로 허용 (예: 웹 클라이언트에서 HTTPS로 요청을 허용했다면 요청에 대한 응답도 허용)

- *인터넷 게이트웨이에 물린다*

  

**[NACL(Network Access Control List)]**

- 보안 그룹과 유사
  - 원본 또는 대상 주소 CIDR, 프로토콜, 포트를 기반으로 트래픽을 인바운드, 아웃바운드 규칙으로 제어 ⇒ 방화벽과 같은 역할
  - VPC에 삭제할 수 없는 기본 NACL이 있음

- 서브넷에 연결되어 해당 서브넷과 송수신되는 트래픽을 제어
- 상태 비저장
  - NACL을 통과한 연결 상태를 추적하지 않는다
  - 모든 인바운드와 아웃바운드 트래픽의 허용 규칙을 별도로 작성해야 함(예: 외부에서 80으로 들어왔다면 80으로 나가지 않고, 큰 수의 임의 랜덤포트로 나가게한다. 랜덤포트로 나갈 수 있도록 허용해줘야 함.)
- 서브넷 안의 인스턴스끼리의 통신 제어는 보안그룹으로 한다. 



**[EC2]**

가상머신이 실행된 것. 서브넷에 배치된다.



**[보안그룹]** = EC2의 방화벽

- 네트워크 인터페이스랑 연결
- 네트워크 인터페이스 카드의 방화벽 룰



[Remote Desktop Protocol (RDP)]

- port 번호 3389
- 원격 연결할 때 사용0



**[고정된 IP]**

서비스 한다면 고정된 IP 할당 받기 



**[Auto scaling]**

일정 개수의 인스턴스를 유지해야한다



**[SSH 터널링]**

