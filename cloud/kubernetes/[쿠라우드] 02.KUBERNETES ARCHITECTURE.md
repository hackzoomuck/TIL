# **02.** **KUBERNETES ARCHITECTURE**

### 1. Introduction

##### [Introduction to Kubernetes Architecture]

아키텍처 장에서 우리는 k8s의 역사를 조금 다룰 것입니다. 이것은 사물이 어디에 있는지 이해하는 데 도움이됩니다. 
그런 다음 k8s를 만들기 위해 작동하는 마스터 노드와 주요 에이전트에 대해 이야기하겠습니다. 
minion nodes - 마스터 노드에 대한 api 호출을 사용하여 구성이 무엇이어야 하는지 파악하고 상태를 보고하는 작업자 노드입니다.
CNI 네트워크 플러그인 구성 - new,  k8s의 미래
몇 가지 일반적인 용어를 다루겠습니다. k8에 대해 자세히 알아보면 각 구성요소가 무엇인지, 그리고 분리되고(decoupled) 일시적인(transient) 환경에서 다른 구성요소와 어떻게 작동하는지 이해할 수 있습니다.

##### [Learning Objectives]

이 섹션을 완료하면 다음 작업을 수행할 수 있습니다.

- Kubernetes와 관련된 가장 일반적인 용어를 이해합니다.

- 쿠베네티스의 역사에 대해 토론하십시오.

- 마스터 노드 구성 요소에 대해 알아봅니다.

- 마이너(작업자) 노드 구성 요소에 대해 알아봅니다.

- CNI(컨테이너 네트워크 인터페이스) 구성 및 네트워크 플러그인을 이해합니다.



### **2. Kubernetes Architecture**

##### [What Is Kubernetes?]

##### [Components of Kubernetes]

컨테이너를 배치하고 Kubernetes를 사용하려면 애플리케이션 배포에 대한 개발 및 시스템 관리 접근 방식의 변화가 필요할 수 있습니다. 기존 환경에서 애플리케이션(예: 웹 서버)은 전용 서버에 배치된 단일 응용프로그램입니다. 웹 트래픽이 증가함에 따라 응용 프로그램이 조정되고 더 크고 더 큰 하드웨어로 이동될 수 있습니다. 2년 후, 현재의 웹 트래픽 요구를 충족하기 위해 많은 사용자 지정이 수행되었을 수 있습니다.

큰 서버를 사용하는 대신, Kubernetes는 많은 수의 작은 웹 서버, 즉 마이크로 서비스를 배치함으로써 동일한 문제에 접근한다. 응용 프로그램의 서버 및 클라이언트 측에서는 요청에 응답하는 데 사용할 수 있는 복제본이라고 하는 하나 이상의 마이크로 서비스가 있을 것으로 예상합니다. 또한 클라이언트는 서버 프로세스가 종료되고 결국 서버 배포가 일시 중단될 것으로 예상해야 합니다. 페이지 요청에 응답하는 여러 httpd 데몬이 있는 촘촘하게 연결된 대형 아파치 웹 서버 대신에, 많은 nginx 서버가 있을 것이다.

소규모 서비스의 일시적인 특성도 디커플링을 가능하게 한다. 기존 애플리케이션의 각 측면은 전용이지만 일시적인 마이크로 서비스 또는 에이전트로 대체됩니다. 이러한 에이전트 또는 대체 에이전트를 함께 참여시키기 위해 서비스와 API 호출을 사용합니다. 서비스는 트래픽을 한 에이전트에서 다른 에이전트(예: 프런트 엔드 웹 서버와 백엔드 데이터베이스)로 연결하며, 한 에이전트가 삭제되어 교체되는 경우 새 IP 또는 기타 정보를 처리합니다.

Kubernetes의 새로운 개발자는 이 관리자가 수십 년 동안 사용해 온 것과 유사한 또 다른 가상 머신 관리자라고 가정하고 Kubernetes를 사용하기 전과 같은 방식으로 애플리케이션을 계속 개발하고 있습니다. 이것은 실수이다. 분리되고 일시적인 마이크로 서비스 아키텍처는 같지 않습니다. 클라우드에서 최적으로 실행하려면 대부분의 기존 애플리케이션을 다시 작성해야 합니다. 아래 다이어그램에서는 노드에 단일 애플리케이션을 배포한 왼쪽의 기존 배포 전략을 보여 줍니다. 오른쪽에는 동일한 하드웨어에서 여러 개의 마이크로 서비스를 사용하는 동일한 기능의 예가 나와 있습니다.

내부뿐만 아니라 구성 요소 간의 통신도 API 호출 기반이므로 유연성이 확보됩니다. 구성 정보는 JSON 형식으로 저장되지만 대부분 YAML로 작성됩니다. Kubernetes 에이전트는 데이터베이스에 지속되기 전에 YAML을 JSON으로 변환합니다.

💡
쿠베르네테스는 C++, 파이썬, 자바의 혼용과 같은 휴대용 언어인 Go Language로 쓰여졌다. 각 부품 중 가장 좋은 부분(최악의 부분)을 포함한다고 주장하는 사람도 있습니다.

